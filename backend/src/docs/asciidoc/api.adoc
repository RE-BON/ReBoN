:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 2
:sectlinks:
:docinfo: shared-head

= RE-BON API Docs

== Common

=== Exception

|===
| 상태 코드 | 설명

| 400 | `잘못된 요청`
| 401 | `권한 없음`
| 500 | `서버 에러`
|===

```json
{
  "message": "에러 상세 내용"
}
```

=== Pagination & Sorting
|===
| 값 | 타입 | 필수 | 설명

| page | Integer | false | 원하는 페이지
| size | Integer | false | 한 페이지에 보여줄 데이터 수
| sort | String | false | 정렬 기준
|===
```
ex) 1페이지 데이터 10개 생성일 오름차순 정렬
https://localhost:8080/api/shops?page=0&size=10&sort=createdAt,asc
```

== Member API

=== 회원가입
==== Request
|===
| 값 | 타입 | 필수 | 설명
| email | String | true | 서버에서 받은 값을 넣어주기
| nickname| String | true | nickname은 Unique해야됨으로 validation 검사 필요
| oauthProvider | String | true | google, naver, kakao 가입 신청한 sns로 보내야됨
| agreed | boolean | true | 수신 동의 여부.
|===
include::{snippets}/MemberCreateAcceptanceTest/saveMember/http-request.adoc[]

==== Response
|===
| 값 | 타입 | 필수 | 설명
|===
include::{snippets}/MemberCreateAcceptanceTest/saveMember/http-response.adoc[]

=== 회원 가입이 되어 있는 경우, login 요청
==== Request
|===
| 값 | 타입 | 필수 | 설명
| oauthProvider | String | true | google, naver, kakao 로그인 요청된 sns로 보내야됨(소문자 가능)
| code | String | true | Authorization server에서 authorization code를 받은 후 전송
|===

include::{snippets}/AuthAcceptanceTest/loginByOauth/http-request.adoc[]

==== Response
|===
| 값 | 타입 | 필수 | 설명
|===

include::{snippets}/AuthAcceptanceTest/loginByOauth/http-response.adoc[]

=== 회원 가입이 되어 있지 않은 경우, login 요청
==== Request
|===
| 값 | 타입 | 필수 | 설명
| oauthProvider | String | true | google, naver, kakao 로그인 요청된 sns로 보내야됨(소문자 가능)
| code | String | true | Authorization server에서 authorization code를 받은 후 전송
|===

include::{snippets}/AuthAcceptanceTest/loginByNotRegisteredMemberGetNotFound/http-request.adoc[]

==== Response
|===
| 값 | 타입 | 필수 | 설명
| email | String | true | 회원 가입이 필요하기 때문에, response body에 요청받은 sns의 email 보냄.
|===
include::{snippets}/AuthAcceptanceTest/loginByNotRegisteredMemberGetNotFound/http-response.adoc[]

=== 지원하지 않은 oauth provider로 login 요청시
==== Request
|===
| 값 | 타입 | 필수 | 설명
| oauthProvider | String | true | google, naver, kakao 로그인 요청된 sns로 보내야됨(소문자 가능)
| code | String | true | Authorization server에서 authorization code를 받은 후 전송
|===
include::{snippets}/AuthAcceptanceTest/loginByNotSupportedProviderGetBadRequest/http-request.adoc[]

==== Response
|===
| 값 | 타입 | 필수 | 설명
|===
include::{snippets}/AuthAcceptanceTest/loginByNotSupportedProviderGetBadRequest/http-response.adoc[]

=== 닉네임 중복 확인 요청, 닉네임이 중복되지 않는 경우
==== Request
|===
| 값 | 타입 | 필수 | 설명
| nickname | String | true | 중복확인 하고 싶은 nickname
|===
include::{snippets}/MemberCreateAcceptanceTest/checkDidNotDuplicateNickname/http-request.adoc[]

==== Response
|===
| 값 | 타입 | 필수 | 설명
|===
include::{snippets}/MemberCreateAcceptanceTest/checkDidNotDuplicateNickname/http-response.adoc[]

=== 닉네임 중복 확인 요청, 닉네임이 중복되는 경우
==== Request
|===
| 값 | 타입 | 필수 | 설명
| nickname | String | true | 중복확인 하고 싶은 nickname
|===
include::{snippets}/MemberCreateAcceptanceTest/checkDuplicatedNickname/http-request.adoc[]

==== Response
|===
| 값 | 타입 | 필수 | 설명
|===
include::{snippets}/MemberCreateAcceptanceTest/checkDuplicatedNickname/http-response.adoc[]

== Tag API

=== Tag 리스트 조회
==== Request
include::{snippets}/TagReadAcceptanceTest/getAllTags/http-request.adoc[]

==== Response
include::{snippets}/TagReadAcceptanceTest/getAllTags/http-response.adoc[]

== Category API
=== 모든 Category 상세 조회
Root Category 와 그 자식 카테고리들의 배열

==== Request


include::{snippets}/CategoryReadAcceptanceTest/getAllRootAndChildrent/http-request.adoc[]
==== Response
include::{snippets}/CategoryReadAcceptanceTest/getAllRootAndChildrent/http-response.adoc[]

== Shop API

=== Shop 리스트 조회(지역, 카테고리 별)
==== Request
|===
| 값 | 타입 | 필수 | 설명

| tag | Long | true | 위치 태그 id 값
| category | Long | true | 최상위 카테고리 id 값
| subCategories | Long | false | 최상위 카테고리에 속한 하위 카테고리의 id값. 여러개 보낼 수 있음(`ex. subCategories=5&subCategories=7`)
|===
include::{snippets}/ShopReadAcceptanceTest/searchSchoolFoodOrWesternRestaurantInPohang/http-request.adoc[]

==== Response
include::{snippets}/ShopReadAcceptanceTest/searchSchoolFoodOrWesternRestaurantInPohang/http-response.adoc[]

=== 단일 Shop 상세 조회
==== Request
|===
| 값 | 타입 | 필수 | 설명

| id | Long | true | 조회하고자 하는 가게의 id 값
|===
include::{snippets}/ShopReadAcceptanceTest/showCafeDetail/http-request.adoc[]

==== Response
include::{snippets}/ShopReadAcceptanceTest/showCafeDetail/http-response.adoc[]

== Review API
`구현 후 추가 예정`
